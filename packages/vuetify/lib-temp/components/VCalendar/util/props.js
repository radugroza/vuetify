import { validateTimestamp, parseDate, DAYS_IN_WEEK, validateTime } from './timestamp';
import { CalendarEventOverlapModes } from '../modes';
export default {
    base: {
        start: {
            type: [String, Number, Date],
            validate: validateTimestamp,
            default: () => parseDate(new Date()).date,
        },
        end: {
            type: [String, Number, Date],
            validate: validateTimestamp,
        },
        weekdays: {
            type: [Array, String],
            default: () => [0, 1, 2, 3, 4, 5, 6],
            validate: validateWeekdays,
        },
        hideHeader: {
            type: Boolean,
        },
        shortWeekdays: {
            type: Boolean,
            default: true,
        },
        weekdayFormat: {
            type: Function,
            default: null,
        },
        dayFormat: {
            type: Function,
            default: null,
        },
    },
    intervals: {
        maxDays: {
            type: Number,
            default: 7,
        },
        shortIntervals: {
            type: Boolean,
            default: true,
        },
        intervalHeight: {
            type: [Number, String],
            default: 48,
            validate: validateNumber,
        },
        intervalWidth: {
            type: [Number, String],
            default: 60,
            validate: validateNumber,
        },
        intervalMinutes: {
            type: [Number, String],
            default: 60,
            validate: validateNumber,
        },
        firstInterval: {
            type: [Number, String],
            default: 0,
            validate: validateNumber,
        },
        firstTime: {
            type: [Number, String, Object],
            validate: validateTime,
        },
        intervalCount: {
            type: [Number, String],
            default: 24,
            validate: validateNumber,
        },
        intervalFormat: {
            type: Function,
            default: null,
        },
        intervalStyle: {
            type: Function,
            default: null,
        },
        showIntervalLabel: {
            type: Function,
            default: null,
        },
    },
    weeks: {
        localeFirstDayOfYear: {
            type: [String, Number],
            default: 0,
        },
        minWeeks: {
            validate: validateNumber,
            default: 1,
        },
        shortMonths: {
            type: Boolean,
            default: true,
        },
        showMonthOnFirst: {
            type: Boolean,
            default: true,
        },
        showWeek: Boolean,
        monthFormat: {
            type: Function,
            default: null,
        },
    },
    calendar: {
        type: {
            type: String,
            default: 'month',
        },
        value: {
            type: [String, Number, Date],
            validate: validateTimestamp,
        },
    },
    category: {
        categories: {
            type: [Array, String],
            default: '',
        },
        categoryHideDynamic: {
            type: Boolean,
        },
        categoryShowAll: {
            type: Boolean,
        },
        categoryForInvalid: {
            type: String,
            default: '',
        },
        categoryDays: {
            type: [Number, String],
            default: 1,
            validate: (x) => isFinite(parseInt(x)) && parseInt(x) > 0,
        },
    },
    events: {
        events: {
            type: Array,
            default: () => [],
        },
        eventStart: {
            type: String,
            default: 'start',
        },
        eventEnd: {
            type: String,
            default: 'end',
        },
        eventTimed: {
            type: [String, Function],
            default: 'timed',
        },
        eventCategory: {
            type: [String, Function],
            default: 'category',
        },
        eventHeight: {
            type: Number,
            default: 20,
        },
        eventColor: {
            type: [String, Function],
            default: 'primary',
        },
        eventTextColor: {
            type: [String, Function],
            default: 'white',
        },
        eventName: {
            type: [String, Function],
            default: 'name',
        },
        eventOverlapThreshold: {
            type: [String, Number],
            default: 60,
        },
        eventOverlapMode: {
            type: [String, Function],
            default: 'stack',
            validate: (mode) => mode in CalendarEventOverlapModes || typeof mode === 'function',
        },
        eventMore: {
            type: Boolean,
            default: true,
        },
        eventMoreText: {
            type: String,
            default: '$vuetify.calendar.moreEvents',
        },
        eventRipple: {
            type: [Boolean, Object],
            default: null,
        },
        eventMarginBottom: {
            type: Number,
            default: 1,
        },
    },
};
export function validateNumber(input) {
    return isFinite(parseInt(input));
}
export function validateWeekdays(input) {
    if (typeof input === 'string') {
        input = input.split(',');
    }
    if (Array.isArray(input)) {
        const ints = input.map(x => parseInt(x));
        if (ints.length > DAYS_IN_WEEK || ints.length === 0) {
            return false;
        }
        const visited = {};
        let wrapped = false;
        for (let i = 0; i < ints.length; i++) {
            const x = ints[i];
            if (!isFinite(x) || x < 0 || x >= DAYS_IN_WEEK) {
                return false;
            }
            if (i > 0) {
                const d = x - ints[i - 1];
                if (d < 0) {
                    if (wrapped) {
                        return false;
                    }
                    wrapped = true;
                }
                else if (d === 0) {
                    return false;
                }
            }
            if (visited[x]) {
                return false;
            }
            visited[x] = true;
        }
        return true;
    }
    return false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvcHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9WQ2FsZW5kYXIvdXRpbC9wcm9wcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsTUFBTSxhQUFhLENBQUE7QUFHdEYsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sVUFBVSxDQUFBO0FBR3BELGVBQWU7SUFDYixJQUFJLEVBQUU7UUFDSixLQUFLLEVBQUU7WUFDTCxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQztZQUM1QixRQUFRLEVBQUUsaUJBQWlCO1lBQzNCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUk7U0FDMUM7UUFDRCxHQUFHLEVBQUU7WUFDSCxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQztZQUM1QixRQUFRLEVBQUUsaUJBQWlCO1NBQzVCO1FBQ0QsUUFBUSxFQUFFO1lBQ1IsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBZ0M7WUFDcEQsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3BDLFFBQVEsRUFBRSxnQkFBZ0I7U0FDM0I7UUFDRCxVQUFVLEVBQUU7WUFDVixJQUFJLEVBQUUsT0FBTztTQUNkO1FBQ0QsYUFBYSxFQUFFO1lBQ2IsSUFBSSxFQUFFLE9BQU87WUFDYixPQUFPLEVBQUUsSUFBSTtTQUNkO1FBQ0QsYUFBYSxFQUFFO1lBQ2IsSUFBSSxFQUFFLFFBQXVDO1lBQzdDLE9BQU8sRUFBRSxJQUFJO1NBQ2Q7UUFDRCxTQUFTLEVB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TUFBTSxLQUFLLENBQUMsRUFBRTtZQUNuRCxPQUFPLEtBQUssQ0FBQTtTQUNiO1FBRUQsTUFBTSxPQUFPLEdBQTRCLEVBQUUsQ0FBQTtRQUMzQyxJQUFJLE9BQU8sR0FBRyxLQUFLLENBQUE7UUFFbkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDcEMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBRWpCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksWUFBWSxFQUFFO2dCQUM5QyxPQUFPLEtBQUssQ0FBQTthQUNiO1lBRUQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNULE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO2dCQUN6QixJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUU7b0JBQ1QsSUFBSSxPQUFPLEVBQUU7d0JBQ1gsT0FBTyxLQUFLLENBQUE7cUJBQ2I7b0JBQ0QsT0FBTyxHQUFHLElBQUksQ0FBQTtpQkFDZjtxQkFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQ2xCLE9BQU8sS0FBSyxDQUFBO2lCQUNiO2FBQ0Y7WUFFRCxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDZCxPQUFPLEtBQUssQ0FBQTthQUNiO1lBQ0QsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQTtTQUNsQjtRQUVELE9BQU8sSUFBSSxDQUFBO0tBQ1o7SUFFRCxPQUFPLEtBQUssQ0FBQTtBQUNkLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IHZhbGlkYXRlVGltZXN0YW1wLCBwYXJzZURhdGUsIERBWVNfSU5fV0VFSywgdmFsaWRhdGVUaW1lIH0gZnJvbSAnLi90aW1lc3RhbXAnXG5pbXBvcnQgeyBQcm9wVHlwZSB9IGZyb20gJ3Z1ZSdcbmltcG9ydCB7IENhbGVuZGFyRXZlbnQsIENhbGVuZGFyRm9ybWF0dGVyLCBDYWxlbmRhclRpbWVzdGFtcCwgQ2FsZW5kYXJFdmVudE92ZXJsYXBNb2RlLCBDYWxlbmRhckV2ZW50TmFtZUZ1bmN0aW9uLCBDYWxlbmRhckV2ZW50Q29sb3JGdW5jdGlvbiwgQ2FsZW5kYXJFdmVudENhdGVnb3J5RnVuY3Rpb24sIENhbGVuZGFyRXZlbnRUaW1lZEZ1bmN0aW9uIH0gZnJvbSAndnVldGlmeS90eXBlcydcbmltcG9ydCB7IENhbGVuZGFyRXZlbnRPdmVybGFwTW9kZXMgfSBmcm9tICcuLi9tb2RlcydcbmltcG9ydCB7IFByb3BWYWxpZGF0b3IgfSBmcm9tICd2dWUvdHlwZXMvb3B0aW9ucydcblxuZXhwb3J0IGRlZmF1bHQge1xuICBiYXNlOiB7XG4gICAgc3RhcnQ6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlciwgRGF0ZV0sXG4gICAgICB2YWxpZGF0ZTogdmFsaWRhdGVUaW1lc3RhbXAsXG4gICAgICBkZWZhdWx0OiAoKSA9PiBwYXJzZURhdGUobmV3IERhdGUoKSkuZGF0ZSxcbiAgICB9LFxuICAgIGVuZDoge1xuICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyLCBEYXRlXSxcbiAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZVRpbWVzdGFtcCxcbiAgICB9LFxuICAgIHdlZWtkYXlzOiB7XG4gICAgICB0eXBlOiBbQXJyYXksIFN0cmluZ10gYXMgUHJvcFR5cGU8bnVtYmVyW10gfCBzdHJpbmc+LFxuICAgICAgZGVmYXVsdDogKCkgPT4gWzAsIDEsIDIsIDMsIDQsIDUsIDZdLFxuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlV2Vla2RheXMsXG4gICAgfSxcbiAgICBoaWRlSGVhZGVyOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgIH0sXG4gICAgc2hvcnRXZWVrZGF5czoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgICB3ZWVrZGF5Rm9ybWF0OiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbiBhcyBQcm9wVHlwZTxDYWxlbmRhckZvcm1hdHRlcj4sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgZGF5Rm9ybWF0OiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbiBhcyBQcm9wVHlwZTxDYWxlbmRhckZvcm1hdHRlcj4sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gIH0sXG4gIGludGVydmFsczoge1xuICAgIG1heERheXM6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDcsXG4gICAgfSxcbiAgICBzaG9ydEludGVydmFsczoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgICBpbnRlcnZhbEhlaWdodDoge1xuICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSxcbiAgICAgIGRlZmF1bHQ6IDQ4LFxuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlTnVtYmVyLFxuICAgIH0sXG4gICAgaW50ZXJ2YWxXaWR0aDoge1xuICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSxcbiAgICAgIGRlZmF1bHQ6IDYwLFxuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlTnVtYmVyLFxuICAgIH0sXG4gICAgaW50ZXJ2YWxNaW51dGVzOiB7XG4gICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLFxuICAgICAgZGVmYXVsdDogNjAsXG4gICAgICB2YWxpZGF0ZTogdmFsaWRhdGVOdW1iZXIsXG4gICAgfSxcbiAgICBmaXJzdEludGVydmFsOiB7XG4gICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLFxuICAgICAgZGVmYXVsdDogMCxcbiAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZU51bWJlcixcbiAgICB9LFxuICAgIGZpcnN0VGltZToge1xuICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nLCBPYmplY3RdLFxuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlVGltZSxcbiAgICB9LFxuICAgIGludGVydmFsQ291bnQ6IHtcbiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sXG4gICAgICBkZWZhdWx0OiAyNCxcbiAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZU51bWJlcixcbiAgICB9LFxuICAgIGludGVydmFsRm9ybWF0OiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbiBhcyBQcm9wVHlwZTxDYWxlbmRhckZvcm1hdHRlcj4sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgaW50ZXJ2YWxTdHlsZToge1xuICAgICAgdHlwZTogRnVuY3Rpb24gYXMgUHJvcFR5cGU8KGludGVydmFsOiBDYWxlbmRhclRpbWVzdGFtcCkgPT4gb2JqZWN0PixcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICBzaG93SW50ZXJ2YWxMYWJlbDoge1xuICAgICAgdHlwZTogRnVuY3Rpb24gYXMgUHJvcFR5cGU8KGludGVydmFsOiBDYWxlbmRhclRpbWVzdGFtcCkgPT4gYm9vbGVhbj4sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gIH0sXG4gIHdlZWtzOiB7XG4gICAgbG9jYWxlRmlyc3REYXlPZlllYXI6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sXG4gICAgICBkZWZhdWx0OiAwLFxuICAgIH0sXG4gICAgbWluV2Vla3M6IHtcbiAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZU51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDEsXG4gICAgfSxcbiAgICBzaG9ydE1vbnRoczoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgICBzaG93TW9udGhPbkZpcnN0OiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB9LFxuICAgIHNob3dXZWVrOiBCb29sZWFuLFxuICAgIG1vbnRoRm9ybWF0OiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbiBhcyBQcm9wVHlwZTxDYWxlbmRhckZvcm1hdHRlcj4sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgdHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ21vbnRoJyxcbiAgICB9LFxuICAgIHZhbHVlOiB7XG4gICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXIsIERhdGVdIGFzIFByb3BUeXBlPHN0cmluZyB8IG51bWJlciB8IERhdGU+LFxuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlVGltZXN0YW1wLFxuICAgIH0sXG4gIH0sXG4gIGNhdGVnb3J5OiB7XG4gICAgY2F0ZWdvcmllczoge1xuICAgICAgdHlwZTogW0FycmF5LCBTdHJpbmddLFxuICAgICAgZGVmYXVsdDogJycsXG4gICAgfSxcbiAgICBjYXRlZ29yeUhpZGVEeW5hbWljOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgIH0sXG4gICAgY2F0ZWdvcnlTaG93QWxsOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgIH0sXG4gICAgY2F0ZWdvcnlGb3JJbnZhbGlkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICB9LFxuICAgIGNhdGVnb3J5RGF5czoge1xuICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSxcbiAgICAgIGRlZmF1bHQ6IDEsXG4gICAgICB2YWxpZGF0ZTogKHg6IGFueSkgPT4gaXNGaW5pdGUocGFyc2VJbnQoeCkpICYmIHBhcnNlSW50KHgpID4gMCxcbiAgICB9LFxuICB9LFxuICBldmVudHM6IHtcbiAgICBldmVudHM6IHtcbiAgICAgIHR5cGU6IEFycmF5LFxuICAgICAgZGVmYXVsdDogKCkgPT4gW10sXG4gICAgfSBhcyBQcm9wVmFsaWRhdG9yPENhbGVuZGFyRXZlbnRbXT4sXG4gICAgZXZlbnRTdGFydDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ3N0YXJ0JyxcbiAgICB9LFxuICAgIGV2ZW50RW5kOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnZW5kJyxcbiAgICB9LFxuICAgIGV2ZW50VGltZWQ6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSBhcyBQcm9wVHlwZTxzdHJpbmcgfCBDYWxlbmRhckV2ZW50VGltZWRGdW5jdGlvbj4sXG4gICAgICBkZWZhdWx0OiAndGltZWQnLFxuICAgIH0sXG4gICAgZXZlbnRDYXRlZ29yeToge1xuICAgICAgdHlwZTogW1N0cmluZywgRnVuY3Rpb25dIGFzIFByb3BUeXBlPHN0cmluZyB8IENhbGVuZGFyRXZlbnRDYXRlZ29yeUZ1bmN0aW9uPixcbiAgICAgIGRlZmF1bHQ6ICdjYXRlZ29yeScsXG4gICAgfSxcbiAgICBldmVudEhlaWdodDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMjAsXG4gICAgfSxcbiAgICBldmVudENvbG9yOiB7XG4gICAgICB0eXBlOiBbU3RyaW5nLCBGdW5jdGlvbl0gYXMgUHJvcFR5cGU8c3RyaW5nIHwgQ2FsZW5kYXJFdmVudENvbG9yRnVuY3Rpb24+LFxuICAgICAgZGVmYXVsdDogJ3ByaW1hcnknLFxuICAgIH0sXG4gICAgZXZlbnRUZXh0Q29sb3I6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSBhcyBQcm9wVHlwZTxzdHJpbmcgfCBDYWxlbmRhckV2ZW50Q29sb3JGdW5jdGlvbj4sXG4gICAgICBkZWZhdWx0OiAnd2hpdGUnLFxuICAgIH0sXG4gICAgZXZlbnROYW1lOiB7XG4gICAgICB0eXBlOiBbU3RyaW5nLCBGdW5jdGlvbl0gYXMgUHJvcFR5cGU8c3RyaW5nIHwgQ2FsZW5kYXJFdmVudE5hbWVGdW5jdGlvbj4sXG4gICAgICBkZWZhdWx0OiAnbmFtZScsXG4gICAgfSxcbiAgICBldmVudE92ZXJsYXBUaHJlc2hvbGQ6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sXG4gICAgICBkZWZhdWx0OiA2MCxcbiAgICB9LFxuICAgIGV2ZW50T3ZlcmxhcE1vZGU6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSxcbiAgICAgIGRlZmF1bHQ6ICdzdGFjaycsXG4gICAgICB2YWxpZGF0ZTogKG1vZGU6IGFueSkgPT4gbW9kZSBpbiBDYWxlbmRhckV2ZW50T3ZlcmxhcE1vZGVzIHx8IHR5cGVvZiBtb2RlID09PSAnZnVuY3Rpb24nLFxuICAgIH0gYXMgUHJvcFZhbGlkYXRvcjwnc3RhY2snIHwgJ2NvbHVtbicgfCBDYWxlbmRhckV2ZW50T3ZlcmxhcE1vZGU+LFxuICAgIGV2ZW50TW9yZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgICBldmVudE1vcmVUZXh0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnJHZ1ZXRpZnkuY2FsZW5kYXIubW9yZUV2ZW50cycsXG4gICAgfSxcbiAgICBldmVudFJpcHBsZToge1xuICAgICAgdHlwZTogW0Jvb2xlYW4sIE9iamVjdF0sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgZXZlbnRNYXJnaW5Cb3R0b206IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDEsXG4gICAgfSxcbiAgfSxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyIChpbnB1dDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBpc0Zpbml0ZShwYXJzZUludChpbnB1dCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVdlZWtkYXlzIChpbnB1dDogc3RyaW5nIHwgKG51bWJlciB8IHN0cmluZylbXSk6IGJvb2xlYW4ge1xuICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgIGlucHV0ID0gaW5wdXQuc3BsaXQoJywnKVxuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgY29uc3QgaW50cyA9IGlucHV0Lm1hcCh4ID0+IHBhcnNlSW50KHgpKVxuXG4gICAgaWYgKGludHMubGVuZ3RoID4gREFZU19JTl9XRUVLIHx8IGludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCB2aXNpdGVkOiBSZWNvcmQ8bnVtYmVyLCBib29sZWFuPiA9IHt9XG4gICAgbGV0IHdyYXBwZWQgPSBmYWxzZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB4ID0gaW50c1tpXVxuXG4gICAgICBpZiAoIWlzRmluaXRlKHgpIHx8IHggPCAwIHx8IHggPj0gREFZU19JTl9XRUVLKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgY29uc3QgZCA9IHggLSBpbnRzW2kgLSAxXVxuICAgICAgICBpZiAoZCA8IDApIHtcbiAgICAgICAgICBpZiAod3JhcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHdyYXBwZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoZCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh2aXNpdGVkW3hdKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgdmlzaXRlZFt4XSA9IHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG4iXX0=